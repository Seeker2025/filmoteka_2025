import{r as O,e as k,t as C,m as w,a as R,b as Y,c as x,d as D}from"./assets/switch-CsF0uf-e.js";import{a as W,P as z}from"./assets/vendor-DT97exK3.js";import{t as d,o as g,c as Q}from"./assets/toChangeText-ZA0xxr74.js";const M=document.querySelector(".box");function B(){M.style.visibility="visible"}function F(){M.style.visibility="hidden"}const p="mess",T=document.querySelector(".for_modal"),h=document.querySelector(".gallery"),b=document.querySelector(".nothing"),v=document.querySelector(".tui-pagination"),H="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08";async function a(t,n,I,E,i=1){try{await W.get(`${t}${n}`,{headers:{"Content-Type":"application/json",Authorization:H},params:{query:I,include_adult:!1,page:i}}).then(o=>{localStorage.setItem(p,JSON.stringify(o.data.results)),o.data&&F(),n==="genre/movie/list"&&localStorage.setItem("genres",JSON.stringify(o.data.genres)),o.data.results?.length?(b.classList.remove("nothing_vis"),v.classList.remove("tui_hidden")):(b.classList.add("nothing_vis"),v.classList.add("tui_hidden")),O(o.data.results,h);const j=document.querySelectorAll("li.card_js");k(j,E),h.addEventListener("click",u=>{if(u.target.closest(".card_js")){const e=C(u.target,p);w(e,T);const U=document.querySelector("div.modal");setTimeout(()=>{U.classList.add("modal_opas")},10);const c=document.querySelector("button.arange_button"),r=document.querySelector("button.white_button");d(c,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),d(r,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),c.addEventListener("click",m=>{R(e),d(c,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),m.stopPropagation()}),r.addEventListener("click",m=>{Y(e),d(r,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),m.stopPropagation()}),x(T,c,r)}});const{results:G,total_results:P,total_pages:J}=o.data;let S=J;i<S&&(g.totalItems=S,g.page=i,new z(Q,g).on("afterMove",function(e){i=e.page,a(t,n,I,E,i)}))})}catch(o){console.log(o),O("mistake404",h)}}const q=document.querySelector("body#index"),_=document.querySelector(".container_head"),L=document.querySelector("input.input_text"),y=document.querySelector("input.switch"),s="https://api.themoviedb.org/3/",f="trending/movie/day",N="search/movie",V="genre/movie/list";a(s,V);a(s,f);let l=null;const A=document.querySelector(".js_form");A.addEventListener("submit",t=>{t.preventDefault(),l=t.currentTarget.elements.search.value,B(),a(s,N,l),A.reset()});const Z=JSON.parse(localStorage.getItem("ui"));if(Z==="dark"){y.checked=!0,D(q,_,L);const t=y.checked;a(s,f,null,t)}y.addEventListener("change",t=>{t.target.checked?localStorage.setItem("ui",JSON.stringify("dark")):localStorage.setItem("ui",JSON.stringify("light")),D(q,_,L);let n=t.target.checked;l?a(s,N,l,n):a(s,f,null,n)});
//# sourceMappingURL=index.js.map
