import{r as U,e as k,t as C,m as w,a as R,b as Y,c as x,d as A}from"./assets/switch-BkCa2zjD.js";import{a as W,P as z}from"./assets/vendor-DT97exK3.js";import{t as d,o as h,c as Q}from"./assets/toChangeText-ZA0xxr74.js";const D=document.querySelector(".box");function B(){D.style.visibility="visible"}function F(){D.style.visibility="hidden"}const S="mess",O=document.querySelector(".for_modal"),p=document.querySelector(".gallery"),T=document.querySelector(".nothing"),b=document.querySelector(".tui-pagination"),H="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08";async function a(t,n,f,I,i=1){try{await W.get(`${t}${n}`,{headers:{"Content-Type":"application/json",Authorization:H},params:{query:f,include_adult:!1,page:i}}).then(o=>{localStorage.setItem(S,JSON.stringify(o.data.results)),o.data&&F(),n==="genre/movie/list"&&localStorage.setItem("genres",JSON.stringify(o.data.genres)),o.data.results?.length?(T.classList.remove("nothing_vis"),b.classList.remove("tui_hidden")):(T.classList.add("nothing_vis"),b.classList.add("tui_hidden")),U(o.data.results,p);const N=document.querySelectorAll("li.card_js");k(N,I),p.addEventListener("click",m=>{if(m.target.closest(".card_js")){const e=C(m.target,S);w(e,O);const J=document.querySelector("div.modal");setTimeout(()=>{J.classList.add("modal_opas")},10);const c=document.querySelector("button.arange_button"),r=document.querySelector("button.white_button");d(c,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),d(r,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),c.addEventListener("click",g=>{R(e),d(c,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),g.stopPropagation()}),r.addEventListener("click",g=>{Y(e),d(r,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),g.stopPropagation()}),x(O,c,r)}});const{results:G,total_results:P,total_pages:j}=o.data;let E=j;i<E&&(h.totalItems=E,h.page=i,new z(Q,h).on("afterMove",function(e){i=e.page,a(t,n,f,I,i)}))})}catch(o){console.log(o)}}const M=document.querySelector("body#index"),q=document.querySelector(".container_head"),_=document.querySelector("input.input_text"),l=document.querySelector("input.switch"),s="https://api.themoviedb.org/3/",y="trending/movie/day",L="search/movie",V="genre/movie/list";a(s,V);a(s,y);let u=null;const v=document.querySelector(".js_form");v.addEventListener("submit",t=>{t.preventDefault(),u=t.currentTarget.elements.search.value,B(),a(s,L,u),v.reset()});const Z=JSON.parse(localStorage.getItem("ui"));if(Z==="dark"){l.checked=!0,A(M,q,_);const t=l.checked;a(s,y,null,t)}l.addEventListener("change",t=>{console.log(l.checked),t.target.checked?localStorage.setItem("ui",JSON.stringify("dark")):localStorage.setItem("ui",JSON.stringify("light")),A(M,q,_);let n=t.target.checked;console.log(n),u?a(s,L,u,n):a(s,y,null,n)});
//# sourceMappingURL=index.js.map
