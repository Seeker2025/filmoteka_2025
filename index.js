import{r as p,e as _,t as k,m as x,a as l,b as E,c as B,d as J}from"./assets/toChangeText-DOuNXNau.js";import{a as j,P as W}from"./assets/vendor-BNzshISR.js";import{o as h,c as R}from"./assets/pagination-B7B_EtDM.js";const D=document.querySelector(".box");function Q(){D.style.visibility="visible"}function F(){D.style.visibility="hidden"}const N="mess",T=document.querySelector(".for_modal"),I=document.querySelector(".gallery"),A=document.querySelector(".nothing"),M=document.querySelector(".tui-pagination");let Z=JSON.parse(localStorage.getItem("queued"))??[];const G="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08";async function i(t,a,n,S,c=1){try{await j.get(`${t}${a}`,{headers:{"Content-Type":"application/json",Authorization:G},params:{query:n,include_adult:!1,page:c}}).then(o=>{localStorage.setItem(N,JSON.stringify(o.data.results)),console.log(o.data),o.data&&F(),o.data.results?.length?(A.classList.remove("nothing_vis"),M.classList.remove("tui_hidden")):(A.classList.add("nothing_vis"),M.classList.add("tui_hidden")),p(o.data.results,I);const L=document.querySelectorAll("li.card_js");_(L,S),I.addEventListener("click",m=>{if(m.target.closest(".card_js")){const e=k(m.target,N);x(e,T);const C=document.querySelector("div.modal");setTimeout(()=>{C.classList.add("modal_opas")},10);const r=document.querySelector("button.arange_button"),d=document.querySelector("button.white_button");l(r,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),l(d,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),r.addEventListener("click",g=>{let U=JSON.parse(localStorage.getItem("watched"))??[];E(U,e,"watched"),l(r,e,"watched","REMOVE FROM WATCHED","ADD TO WATCHED"),g.stopPropagation()}),d.addEventListener("click",g=>{E(Z,e,"queued"),l(d,e,"queued","REMOVE FROM QUEUE","ADD TO QUEUE"),g.stopPropagation()}),B(T,r,d)}});const{results:P,total_results:K,total_pages:w}=o.data;let f=w;c<f&&(h.totalItems=f,h.page=c,new W(R,h).on("afterMove",function(e){c=e.page,i(t,a,n,S,c)}))})}catch(o){console.log(o),p("mistake404",I)}}const H="Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08";async function V(t,a){try{await j.get(`${t}${a}`,{headers:{"Content-Type":"application/json",Authorization:H}}).then(n=>{localStorage.setItem("genres",JSON.stringify(n.data.genres))})}catch(n){console.log(n)}}const q=document.querySelector("body#index"),Y=document.querySelector(".container_head"),v=document.querySelector("input.input_text"),y=document.querySelector("input.switch"),s="https://api.themoviedb.org/3/",O="trending/movie/day",z="search/movie",$="genre/movie/list";V(s,$);i(s,O);let u=null;const b=document.querySelector(".js_form");b.addEventListener("submit",t=>{t.preventDefault(),u=t.currentTarget.elements.search.value,Q(),i(s,z,u),b.reset()});const X=JSON.parse(localStorage.getItem("ui"));if(X==="dark"){y.checked=!0,J(q,Y,v);const t=y.checked;i(s,O,null,t)}y.addEventListener("change",t=>{t.target.checked?localStorage.setItem("ui",JSON.stringify("dark")):localStorage.setItem("ui",JSON.stringify("light")),J(q,Y,v);let a=t.target.checked;u?i(s,z,u,a):i(s,O,null,a)});
//# sourceMappingURL=index.js.map
