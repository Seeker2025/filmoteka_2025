{"version":3,"file":"library.js","sources":["../src/js/toMainFun.js","../src/library.js"],"sourcesContent":["export function to(arr, oneObj, keyLoc){\n                   \n                    if(arr.some(itm => itm.id === oneObj.id)){\n                       arr = arr.filter(itm=>itm.id!==oneObj.id);\n                            // console.log(arr01);\n                       localStorage.setItem(keyLoc, JSON.stringify(arr));\n                    //    let kitWatched = JSON.parse(localStorage.getItem(\"watched\"));\n                    //    renderLayout(kitWatched, ulLibrary, forModalLib);     \n                    }else{\n                       watchedArr.push(oneObj);\n                       localStorage.setItem(keyLoc, JSON.stringify(arr));\n                    //    let kitWatched = JSON.parse(localStorage.getItem('watched'));\n                    //    renderLayout(kitWatched, ulLibrary, forModalLib);  \n                         }\n                    \n\n}","console.log('library');\n\nimport      Pagination                  from  'tui-pagination'; \nimport {    options,\n            container\n                                }       from './js/pagination.js';\nimport {    toChangeTxtOnBtn    }       from './js/toChangeText.js';\nimport {    toSwitchToDarkUI    }       from './js/switch';\nimport {    toSwitchUIforLiCard }       from './js/switch.js';\nimport {    footerScaleJS       }       from './js/footer';\nimport {    renderLayout        }       from './js/render';\nimport {    modalMarkup,\n            toForButtonCross    }       from './js/modal_markup';\nimport {    toForFind           }       from './js/toForFind';\nimport {    toWatch,\n            toQueue             }       from './js/toFun';\nimport { to }            from './js/toMainFun.js';\n\nconst containerHeadLib = document.querySelector('.container_head_lib');\nconst pageLibrary = document.getElementById('library');\n\n\n            if(pageLibrary){\n            const btnWatched = document.querySelector('a.button_watched_js');\n            btnWatched.classList.add('other_color');\n            }\n\n\nconst KEY = 'watched';\nconst ulLibrary = document.querySelector('ul.ul_library');\nconst forModalLib = document.querySelector('.for_modal_lib');\n\n/////// Pagination for library page\nlet itemsForPage = null;\nfunction too(onePage = 1){\n   const kitWatched = JSON.parse(localStorage.getItem('watched')) ?? [];\n   const startIndex = (onePage - 1) * 20;\n   const endIndex = startIndex + 20;\n   itemsForPage = kitWatched.slice(startIndex, endIndex);\n   renderLayout(itemsForPage, ulLibrary);\n                \nif (kitWatched.length > 20) {\n        if (container) container.innerHTML = '';\n        options.totalItems = kitWatched.length;\n        options.itemsPerPage = 20;\n        options.page = onePage;\n        const pagination = new Pagination(container, options);\n        pagination.on('afterMove', function (event) {\n        onePage = event.page;\n        too(onePage);\n    });\n    }\n};\n//=====================================================    \n\n    too();\n \n            ulLibrary.addEventListener('click', (evt)=>{\n            evt.preventDefault();\n            if(evt.target.closest('.card_js')){\n               \n                const oneObj = toForFind(evt.target, KEY);\n                if(!oneObj) return;\n                \n                modalMarkup(oneObj, forModalLib);\n                            const modalOpas = document.querySelector('div.modal');\n                            console.log(modalOpas);\n                            setTimeout(() => { modalOpas.classList.add('modal_opas')}, 10);\n                const btnAddToWatch = document.querySelector('button.arange_button');     \n                const btnAddToQueue = document.querySelector('button.white_button'); \n\n                        toChangeTxtOnBtn(\n                        btnAddToWatch,\n                        oneObj,\n                        'watched',\n                        'REMOVE FROM WATCHED',\n                        'ADD TO WATCHED'\n                                         ); \n\n               \n\n\n                        toChangeTxtOnBtn(\n                        btnAddToQueue,\n                        oneObj,\n                        'queued',\n                        'REMOVE FROM QUEUE',\n                        'ADD TO QUEUE'\n                                        );      \n                            \n                   \n                    btnAddToWatch.addEventListener('click', (evt)=>{\n                                    // toWatch(oneObj);\n                                    to()\n                        toChangeTxtOnBtn(\n                        btnAddToWatch,\n                        oneObj,\n                        'watched',\n                        'REMOVE FROM WATCHED',\n                        'ADD TO WATCHED'\n                        );                     \n                                    too();\n                                             \n                                                evt.stopPropagation();\n                                                });\n\n  \n                    btnAddToQueue.addEventListener('click', (evt)=>{\n                                    toQueue(oneObj);\n\n                        toChangeTxtOnBtn(\n                        btnAddToQueue,\n                        oneObj,\n                        'queued',\n                        'REMOVE FROM QUEUE',\n                        'ADD TO QUEUE'\n                                        );                                           \n                                                evt.stopPropagation();\n                                                });\n                                \n                toForButtonCross(forModalLib, btnAddToWatch, btnAddToQueue);\n               \n\n            }\n        });\n    const switchInpLib = document.querySelector('input.switch');\n//  console.log(switchInpLib);     \n\n ////// UI for library page      \n    const ui = JSON.parse(localStorage.getItem('ui'));\n    if(ui==='dark'){ \n        switchInpLib.checked = true;\n        toSwitchToDarkUI(pageLibrary, containerHeadLib, null);\n        const sense = switchInpLib.checked;\n        renderLayout(itemsForPage, ulLibrary);\n        const cards = document.querySelectorAll('li.card_js');\n        toSwitchUIforLiCard(cards, true);\n     \n        }\n        \n\n////// switching UI for library page\n   \n       \n   switchInpLib.addEventListener('change', (evt)=>{\n        \n    // console.log(evt.target.checked);\n       if(evt.target.checked) localStorage.setItem('ui', JSON.stringify('dark'));\n       else localStorage.setItem('ui', JSON.stringify('light')); \n       renderLayout(itemsForPage, ulLibrary);\n       toSwitchToDarkUI(pageLibrary, containerHeadLib, null);\n       const cards = document.querySelectorAll('li.card_js');\n////// For cards in 'ul'\n       toSwitchUIforLiCard(cards, evt.target.checked);\n       })  "],"names":["to","arr","oneObj","keyLoc","itm","containerHeadLib","pageLibrary","KEY","ulLibrary","forModalLib","itemsForPage","too","onePage","kitWatched","startIndex","endIndex","renderLayout","container","options","Pagination","event","evt","toForFind","modalMarkup","modalOpas","btnAddToWatch","btnAddToQueue","toChangeTxtOnBtn","toQueue","toForButtonCross","switchInpLib","ui","toSwitchToDarkUI","cards","toSwitchUIforLiCard"],"mappings":"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"}