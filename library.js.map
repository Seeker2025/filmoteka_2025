{"version":3,"file":"library.js","sources":["../src/library.js"],"sourcesContent":["console.log('library');\nimport    Pagination            from  'tui-pagination'; \nimport {  options,\n          container\n }                              from './js/pagination.js';\nimport {  toChangeTxtOnBtn } from './js/toChangeText.js';\n\n////// Class\n//  import { ToRender } from './js/class';\n// import { ToRender } from './js/class';\n//  console.log(ToRender);\nimport { footerScaleJS }    from './js/footer';\nimport { renderLayout } from './js/render';\nimport { modalMarkup, toForButtonCross } from './js/modal_markup';\nimport { toForFind } from './js/toForFind';\nimport { toWatch, toQueue } from './js/toFun';\n// console.log(renderLayout);\n\n            const pageLibrary = document.getElementById('library');\n            if(pageLibrary){\n               const btnWatched = document.querySelector('a.button_watched_js');\n               btnWatched.classList.add('other_color');\n            }\n\n\nconst KEY = 'watched';\nconst ulLibrary = document.querySelector('ul.ul_library');\nconst forModalLib = document.querySelector('.for_modal_lib');\n\nconst kitWatched = JSON.parse(localStorage.getItem('watched')) ?? [];\n//------------------------------------------------------------------\nfunction too(onePage=1){\n   const kitWatched = JSON.parse(localStorage.getItem('watched')) ?? [];\n   const startIndex = (onePage - 1) * 20;\n   const endIndex = startIndex + 20;\n   const itemsForPage = kitWatched.slice(startIndex, endIndex);\n   renderLayout(itemsForPage, ulLibrary);\n\nif (kitWatched.length > 20) {\n        if (container) container.innerHTML = '';\n        options.totalItems = kitWatched.length;\n        options.itemsPerPage = 20;\n        options.page = onePage;\n        const pagination = new Pagination(container, options);\n        pagination.on('afterMove', function (event) {\n        onePage = event.page;\n        too(onePage);\n    });\n    }\n};\n//=====================================================    \n\ntoo();\n \n            ulLibrary.addEventListener('click', (evt)=>{\n               evt.preventDefault();\n            if(evt.target.closest('.card_js')){\n               \n                const oneObj = toForFind(evt.target, KEY);\n                if(!oneObj) return;\n                \n                modalMarkup(oneObj, forModalLib);\n\n                const btnAddToWatch = document.querySelector('button.arange_button');     \n                const btnAddToQueue = document.querySelector('button.white_button'); \n\n                 toChangeTxtOnBtn(\n            btnAddToWatch,\n            oneObj,\n            'watched',\n            'REMOVE FROM WATCHED',\n            'ADD TO WATCHED'\n        ); \n\n                //  const prstArr = JSON.parse(localStorage.getItem('watched'));\n                //         const present = prstArr.some(itm=>itm.id===oneObj.id);\n                //         if(present){\n                //             btnAddToWatch.textContent = 'REMOVE FROM WATCHED';\n                //         } \n                //         else{\n                //             btnAddToWatch.textContent = 'ADD TO WATCHED';\n                //         }\n\n\n                         toChangeTxtOnBtn(\n            btnAddToQueue,\n            oneObj,\n            'queued',\n            'REMOVE FROM QUEUE',\n            'ADD TO QUEUE'\n        );      \n                //  const prstQu = JSON.parse(localStorage.getItem('queued'));\n                //     const presentQ = prstQu.some(itm=>itm.id===oneObj.id); \n                //     if(presentQ){\n                //            btnAddToQueue.textContent = 'REMOVE FROM QUEUE';\n                //         } \n                //     else{\n                //            btnAddToQueue.textContent = 'ADD TO QUEUE';\n                //         }               \n                   \n                    btnAddToWatch.addEventListener('click', (evt)=>{\n                                    toWatch(oneObj);\n    toChangeTxtOnBtn(\n            btnAddToWatch,\n            oneObj,\n            'watched',\n            'REMOVE FROM WATCHED',\n            'ADD TO WATCHED'\n        );                     \n                        // const prstArr = JSON.parse(localStorage.getItem('watched'));\n                        // const present = prstArr.some(itm=>itm.id===oneObj.id);\n                        // if(present){\n                        //     btnAddToWatch.textContent = 'REMOVE FROM WATCHED';\n                        // } \n                        // else{\n                        //     btnAddToWatch.textContent = 'ADD TO WATCHED';\n                        // }\n                                                  \n                        // const kit = JSON.parse(localStorage.getItem('watched')) ?? [];\n                        too();\n                        // renderLayout(kit, ulLibrary);                         \n                                                 evt.stopPropagation();\n                                                 });\n\n\n\n\n\n\n                        \n                    btnAddToQueue.addEventListener('click', (evt)=>{\n                                                 toQueue(oneObj);\n\n         toChangeTxtOnBtn(\n            btnAddToQueue,\n            oneObj,\n            'queued',\n            'REMOVE FROM QUEUE',\n            'ADD TO QUEUE'\n        );                                           \n                    // const prstArr = JSON.parse(localStorage.getItem('queued'));\n                    // const present = prstArr.some(itm=>itm.id===oneObj.id); \n                    // if(present){\n                    //        btnAddToQueue.textContent = 'REMOVE FROM QUEUE';\n                    //     } \n                    // else{\n                    //        btnAddToQueue.textContent = 'ADD TO QUEUE';\n                    //     }                            \n                    //                              evt.stopPropagation();\n                                                 });\n                                \n                toForButtonCross(forModalLib, btnAddToWatch, btnAddToQueue);\n               \n\n            }\n        })"],"names":["pageLibrary","KEY","ulLibrary","forModalLib","too","onePage","kitWatched","startIndex","endIndex","itemsForPage","renderLayout","container","options","Pagination","event","evt","oneObj","toForFind","modalMarkup","btnAddToWatch","btnAddToQueue","toChangeTxtOnBtn","toWatch","toQueue","toForButtonCross"],"mappings":"iMAAA,QAAQ,IAAI,SAAS,EAkBT,MAAMA,EAAc,SAAS,eAAe,SAAS,EAClDA,GACmB,SAAS,cAAc,qBAAqB,EACpD,UAAU,IAAI,aAAa,EAIrD,MAAMC,EAAM,UACNC,EAAY,SAAS,cAAc,eAAe,EAClDC,EAAc,SAAS,cAAc,gBAAgB,EAExC,KAAK,MAAM,aAAa,QAAQ,SAAS,CAAC,EAE7D,SAASC,EAAIC,EAAQ,EAAE,CACpB,MAAMC,EAAa,KAAK,MAAM,aAAa,QAAQ,SAAS,CAAC,GAAK,CAAA,EAC5DC,GAAcF,EAAU,GAAK,GAC7BG,EAAWD,EAAa,GACxBE,EAAeH,EAAW,MAAMC,EAAYC,CAAQ,EAC1DE,EAAaD,EAAcP,CAAS,EAEnCI,EAAW,OAAS,KACZK,IAAWA,EAAU,UAAY,IACrCC,EAAQ,WAAaN,EAAW,OAChCM,EAAQ,aAAe,GACvBA,EAAQ,KAAOP,EACI,IAAIQ,EAAWF,EAAWC,CAAO,EACzC,GAAG,YAAa,SAAUE,EAAO,CAC5CT,EAAUS,EAAM,KAChBV,EAAIC,CAAO,CACf,CAAC,EAEL,CAGAD,EAAG,EAESF,EAAU,iBAAiB,QAAUa,GAAM,CAE3C,GADGA,EAAI,eAAc,EAClBA,EAAI,OAAO,QAAQ,UAAU,EAAE,CAE9B,MAAMC,EAASC,EAAUF,EAAI,OAAQd,CAAG,EACxC,GAAG,CAACe,EAAQ,OAEZE,EAAYF,EAAQb,CAAW,EAE/B,MAAMgB,EAAgB,SAAS,cAAc,sBAAsB,EAC7DC,EAAgB,SAAS,cAAc,qBAAqB,EAEjEC,EACLF,EACAH,EACA,UACA,sBACA,gBACZ,EAYyBK,EACbD,EACAJ,EACA,SACA,oBACA,cACZ,EAUoBG,EAAc,iBAAiB,QAAUJ,GAAM,CAC/BO,EAAQN,CAAM,EAC9CK,EACQF,EACAH,EACA,UACA,sBACA,gBACZ,EAWwBZ,EAAG,EAEsBW,EAAI,gBAAe,CACnB,CAAC,EAQ9BK,EAAc,iBAAiB,QAAUL,GAAM,CAClBQ,EAAQP,CAAM,EAEtDK,EACGD,EACAJ,EACA,SACA,oBACA,cACZ,CAUiD,CAAC,EAElCQ,EAAiBrB,EAAagB,EAAeC,CAAa,CAG9D,CACJ,CAAC"}