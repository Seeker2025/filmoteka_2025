{"version":3,"file":"index.js","sources":["../src/js/loader.js","../src/js/api.js","../src/js/apiForGen.js","../src/index.js"],"sourcesContent":["const loader = document.querySelector('.box');\n\nexport function showLoader(){\n   loader.style.visibility = 'visible';\n}\n\nexport function hideLoader(){\n   loader.style.visibility = 'hidden';\n}"," \nimport    axios                        from 'axios';\nimport {  renderLayout               } from './render';\nimport    Pagination                   from  'tui-pagination'; \nimport {  options,\n          container\n                                     } from './pagination.js';\nimport {  hideLoader                 } from './loader.js';\nimport {  toForFind                  } from './toForFind.js'\nimport {  toChangeTxtOnBtn           } from './toChangeText.js';\nimport {  toSwitchUIforLiCard        } from './switch.js';\nimport {\n          modalMarkup,\n          toForButtonCross \n                                     } from './modal_markup.js';\nimport {  toFun                      } from './toFun.js';\n\nconst KEY = 'mess';\n\nconst forModal = document.querySelector('.for_modal');\nconst galleryRef = document.querySelector('.gallery');\nconst nothing = document.querySelector('.nothing');\nconst tuiHidden = document.querySelector('.tui-pagination');\n\nconst bearer = 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08';\n\nexport async function getAPIdata(\n                                     main,\n                                     part,\n                                     whatLookingFor,\n                                     sense,\n                                     onePage = 1\n                                ){\n    try{\n        await axios.get( `${main}${part}`, {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        Authorization: bearer,\n                            },\n                            params: {\n                            query: whatLookingFor,\n                            include_adult: false,\n                            page: onePage,\n                            \n                            }\n })\n                .then(response => {\n        localStorage.setItem(KEY, JSON.stringify(response.data.results));\n        console.log(response.data);\n        \n                                ///// Loader\n                        if(response.data) hideLoader();\n                                \n                              \n                        // if(part === 'search/movie'){                       \n                                \n                                //console.log(response.data.genres);\n                                ///// Search result not successful\n                                if(!response.data.results?.length){\n                                nothing.classList.add('nothing_vis');\n                                tuiHidden.classList.add('tui_hidden');\n                                }else{\n                                nothing.classList.remove('nothing_vis');\n                                tuiHidden.classList.remove('tui_hidden');    \n                                }\n                                \n                                \n        renderLayout(response.data.results, galleryRef); \n      \n        const cards = document.querySelectorAll('li.card_js');\n        // console.log(sense);\n        toSwitchUIforLiCard(cards, sense);\n\n        galleryRef.addEventListener('click', (evt)=>{\n                if(evt.target.closest('.card_js')){\n               \n                const oneObj = toForFind(evt.target, KEY);\n                // apiForTrl(main, oneObj.id);\n                modalMarkup(oneObj, forModal);\n\n    //////smooth appearance of a modal window            \n                const modalOpas = document.querySelector('div.modal');\n                // console.log(modalOpas);\n                setTimeout(() => { modalOpas.classList.add('modal_opas')}, 10);\n                \n        const btnAddToWatch = document.querySelector('button.arange_button');     \n        const btnAddToQueue = document.querySelector('button.white_button'); \n\n        toChangeTxtOnBtn(\n            btnAddToWatch,\n            oneObj,\n            'watched',\n            'REMOVE FROM WATCHED',\n            'ADD TO WATCHED'\n        ); \n\n        toChangeTxtOnBtn(\n            btnAddToQueue,\n            oneObj,\n            'queued',\n            'REMOVE FROM QUEUE',\n            'ADD TO QUEUE'\n        );      \n\n        btnAddToWatch.addEventListener('click', (evt)=>{\n        \n                                toFun(\n                                      oneObj,\n                                      'watched'\n                                      );\n\n        toChangeTxtOnBtn(\n            btnAddToWatch,\n            oneObj,\n            'watched',\n            'REMOVE FROM WATCHED',\n            'ADD TO WATCHED'\n        ); \n\n                                 evt.stopPropagation();\n                                 });\n        \n        btnAddToQueue.addEventListener('click', (evt)=>{\n                               \n                                 toFun(\n                                       oneObj,\n                                       'queued'\n                                      );\n                                      \n        toChangeTxtOnBtn(\n            btnAddToQueue,\n            oneObj,\n            'queued',\n            'REMOVE FROM QUEUE',\n            'ADD TO QUEUE'\n        );                               \n                                 evt.stopPropagation();\n                                 });\n                toForButtonCross(forModal, btnAddToWatch, btnAddToQueue);\n\n            }\n        })\n       \n                        const { results, total_results, total_pages } = response.data;\n                        let totalPages = total_pages;\n    if (onePage < totalPages) {\n        options.totalItems = totalPages;\n        options.page = onePage;\n        const pagination = new Pagination(container, options);\n        pagination.on('afterMove', function (event) {\n        onePage = event.page;\n        getAPIdata(main, part,  whatLookingFor, sense, onePage);\n    });\n    }\n}\n)\n \n    }catch(error){\n    console.log(error);\n    renderLayout('mistake404', galleryRef); \n    }\n}\n","import    axios                 from 'axios';\nconst bearer = 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzYWY1ZmQwYjgzOGJmMmEyNTlmZjA2Y2I3NTk2ODAzNyIsIm5iZiI6MTY3MDIyNjI2NC4xMzIsInN1YiI6IjYzOGRhMTU4MTI4M2U5MDA5NzY3Njg3OCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.LbbNBAE2uu7qSjmBFjXYtTYw99nAa-BxDgIdgH9cD08';\nconst genre = 'genre/movie/list';\n\nexport async function apiForGen(main, genre){\n    // localStorage.removeItem('key');  \n         try{\n         await axios.get( `${main}${genre}`, {\n\n                        headers: {\n                            'Content-Type': 'application/json',\n                        Authorization: bearer,\n                            }\n                           \n })\n                .then(response => {  \n                    \n        localStorage.setItem('genres', JSON.stringify(response.data.genres));\n                        \n                                     \n        });\n    }catch(error){\n    console.log(error);\n    \n    }\n}\n","import {    getAPIdata       }    from './js/api';\nimport {    footerScaleJS    }    from './js/footer';\nimport {    showLoader       }    from './js/loader';\nimport {    toSwitchToDarkUI }    from './js/switch';\nimport {    apiForTrl        } from './js/apiForTrl';\n// import {    getTrailer        } from './js/apiForTrl';\nimport {    apiForGen        } from './js/apiForGen';\n\nconst bodyIndex = document.querySelector('body#index');\nconst containerHead = document.querySelector('.container_head');\nconst inputText = document.querySelector('input.input_text');\nconst switchInp = document.querySelector('input.switch');\n   \nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst trending = 'trending/movie/day';\nconst search   = 'search/movie';\nconst genre = 'genre/movie/list';\n// const trailer = 'https://api.themoviedb.org/3/movie/{movie_id}/videos';\nconst trailer = 'movie/{movie_id}/videos';\n\n\n\n    apiForGen( BASE_URL, genre);\n    getAPIdata( BASE_URL, trending);\n    // apiForTrl(BASE_URL, 1168190).then(({id})=>console.log(id));\n    \n    // console.log(getAPIdata( BASE_URL, trending));\n    // let a = getAPIdata( BASE_URL, trending);\n    // console.log(a.then(({results})=>results));\n    \n    // getTrailer( 495896)\n    // getTrailer(495896);\n    \n    \n    \n    \n\n\n                let movie = null;\n\n                            const form = document.querySelector('.js_form');\n                            form.addEventListener('submit', (evt)=>{\n                            evt.preventDefault();\n                            movie = evt.currentTarget.elements.search.value;\n                            showLoader();\n                            getAPIdata(BASE_URL, search, movie);\n                            form.reset();\n                            });\n\n////// switching UI for the Index page\nconst ui = JSON.parse(localStorage.getItem('ui'));\nif(ui === 'dark'){ \n    switchInp.checked = true;\n    toSwitchToDarkUI(bodyIndex, containerHead, inputText);\n    const sense = switchInp.checked;\n    getAPIdata(BASE_URL, trending, null, sense);\n    }\n\n    \nswitchInp.addEventListener('change', (evt)=>{\n    // console.log(evt.target.checked);\n    // console.log(switchInp.checked);\n    if(evt.target.checked) localStorage.setItem('ui', JSON.stringify('dark'));\n    else localStorage.setItem('ui', JSON.stringify('light'));  \n    toSwitchToDarkUI(bodyIndex, containerHead, inputText);\n    let sense = evt.target.checked;\n    // console.log(sense);\n    if(movie) getAPIdata(BASE_URL, search, movie, sense);\n    else getAPIdata(BASE_URL, trending, null, sense);\n\n})    \n\n\n"],"names":["loader","showLoader","hideLoader","KEY","forModal","galleryRef","nothing","tuiHidden","bearer","getAPIdata","main","part","whatLookingFor","sense","onePage","axios","response","renderLayout","cards","toSwitchUIforLiCard","evt","oneObj","toForFind","modalMarkup","modalOpas","btnAddToWatch","btnAddToQueue","toChangeTxtOnBtn","toFun","toForButtonCross","results","total_results","total_pages","totalPages","options","Pagination","container","event","error","apiForGen","genre","bodyIndex","containerHead","inputText","switchInp","BASE_URL","trending","search","movie","form","ui","toSwitchToDarkUI"],"mappings":"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"}